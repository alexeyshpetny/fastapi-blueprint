# =============================================================================
# FastAPI Blueprint - Environment Configuration
# =============================================================================
# Copy this file to .env and update values for your environment.
# NEVER commit .env to version control - it may contain sensitive data.
#
# All APP_* variables are used by the FastAPI application.
# POSTGRES_* variables are used by Docker Compose for the database service.
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
APP_ENVIRONMENT=development
APP_DEBUG=false
APP_SERVICE_NAME=shpetny-fastapi-blueprint
APP_API_V1_PREFIX=/api/v1

# -----------------------------------------------------------------------------
# Documentation Settings
# -----------------------------------------------------------------------------
APP_DOC_TITLE=Shpetny FastAPI Blueprint
APP_DOC_VERSION=1.0.0
APP_DOC_DESCRIPTION=API documentation for Shpetny FastAPI Blueprint
APP_DOC_OPENAPI_URL=/api/openapi.json
APP_DOC_OPENAPI_VERSION=3.0.2
APP_DOC_SWAGGER_URL=/api/docs
APP_DOC_REDOC_URL=/api/redoc

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# WARNING: In production, use specific origins, not ["*"]
# Format: JSON array, e.g., '["https://example.com", "https://app.example.com"]'
APP_CORS_ALLOW_ORIGINS=["*"]
APP_CORS_ALLOW_METHODS=["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
APP_CORS_ALLOW_HEADERS=["*"]
APP_CORS_ALLOW_CREDENTIALS=false
APP_CORS_MAX_AGE=600

# -----------------------------------------------------------------------------
# Security Headers
# -----------------------------------------------------------------------------
APP_SECURITY_HEADERS_ENABLED=true
APP_SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff
APP_SECURITY_X_FRAME_OPTIONS=DENY
APP_SECURITY_X_XSS_PROTECTION=1; mode=block
APP_SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin
# HSTS - Only set if serving over HTTPS
# APP_SECURITY_STRICT_TRANSPORT_SECURITY=max-age=31536000; includeSubDomains
# CSP - Optional, customize for your needs
# APP_SECURITY_CONTENT_SECURITY_POLICY=default-src 'self'
# Permissions Policy - Optional
# APP_SECURITY_PERMISSIONS_POLICY=geolocation=(), microphone=(), camera=()

# -----------------------------------------------------------------------------
# Rate Limiting
# -----------------------------------------------------------------------------
APP_RATE_LIMIT_ENABLED=false
APP_RATE_LIMIT_DEFAULT=100/minute
# Redis URI for rate limiting (optional, uses in-memory if not set)
# APP_RATE_LIMIT_STORAGE_URI=redis://localhost:6379/1
APP_RATE_LIMIT_HEADERS_ENABLED=true

# -----------------------------------------------------------------------------
# Trusted Hosts & Request Size
# -----------------------------------------------------------------------------
APP_TRUSTED_HOSTS_ENABLED=false
# Format: JSON array, e.g., '["example.com", "*.example.com"]'
APP_TRUSTED_HOSTS=[]
APP_MAX_REQUEST_BODY_SIZE=10485760

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# These are used by both Docker Compose and the application
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=fastapi_blueprint

# Application database settings (with APP_ prefix)
APP_DB_HOST=postgres
APP_DB_PORT=5432
APP_DB_USER=postgres
APP_DB_PASSWORD=postgres
APP_DB_NAME=fastapi_blueprint
APP_DB_POOL_SIZE=5
APP_DB_MAX_OVERFLOW=10
APP_DB_POOL_TIMEOUT=30
APP_DB_POOL_RECYCLE=3600
APP_DB_ECHO=false

# -----------------------------------------------------------------------------
# Redis Cache Configuration
# -----------------------------------------------------------------------------
APP_CACHE_ENABLED=true
APP_CACHE_HOST=redis
APP_CACHE_PORT=6379
# APP_CACHE_PASSWORD=your-redis-password
APP_CACHE_DB=0
APP_CACHE_SOCKET_TIMEOUT=5
APP_CACHE_SOCKET_CONNECT_TIMEOUT=5
APP_CACHE_MAX_CONNECTIONS=50
APP_CACHE_RETRY_ON_TIMEOUT=true
APP_CACHE_DEFAULT_TTL=300
APP_CACHE_KEY_PREFIX=fastapi-cache

# -----------------------------------------------------------------------------
# Logging Configuration
# -----------------------------------------------------------------------------
APP_LOG_LEVEL=INFO
APP_LOG_FORMAT=json
APP_LOG_DATE_FORMAT=%Y-%m-%d %H:%M:%S
APP_LOG_INCLUDE_REQUEST_ID=true
APP_LOG_REQUEST_BODY=false
APP_LOG_SLOW_REQUESTS=true
APP_LOG_SLOW_REQUEST_THRESHOLD=1.0

# -----------------------------------------------------------------------------
# Authentication & JWT Settings
# -----------------------------------------------------------------------------
# WARNING: Change JWT_SECRET_KEY in production! Must be at least 32 characters.
# Generate a secure random string: python -c "import secrets; print(secrets.token_urlsafe(32))"
APP_JWT_SECRET_KEY=change-me-in-production-minimum-32-characters-long-secret-key
APP_JWT_ALGORITHM=HS256
APP_JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
APP_JWT_REFRESH_TOKEN_EXPIRE_DAYS=7
APP_JWT_REFRESH_TOKEN_COOKIE_NAME=refresh_token
APP_JWT_REFRESH_TOKEN_HTTP_ONLY=true
APP_JWT_REFRESH_TOKEN_SECURE=true
APP_JWT_REFRESH_TOKEN_SAME_SITE=lax
APP_PASSWORD_MIN_LENGTH=8
APP_BCRYPT_ROUNDS=12
APP_DEFAULT_USER_ROLE=user

# =============================================================================
# Production Checklist
# =============================================================================
# Before deploying to production, ensure:
# 1. APP_ENVIRONMENT=production
# 2. APP_DEBUG=false
# 3. APP_JWT_SECRET_KEY is changed to a secure random string (32+ characters)
# 4. APP_DB_PASSWORD is changed from default
# 5. APP_CORS_ALLOW_ORIGINS uses specific origins, not ["*"]
# 6. APP_CACHE_PASSWORD is set if using Redis
# 7. APP_SECURITY_STRICT_TRANSPORT_SECURITY is set if using HTTPS
# 8. All secrets are stored in a secret management service
# =============================================================================
