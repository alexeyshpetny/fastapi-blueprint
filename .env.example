# =============================================================================
# FastAPI Blueprint - Environment Variables Example
# =============================================================================
# Copy this file to .env and update the values according to your environment.
# All application variables are prefixed with APP_ as configured in the settings.
#
# IMPORTANT: Never commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------

# API version prefix for v1 endpoints
APP_API_V1_PREFIX=/api/v1

# Testing mode (automatically set to True during pytest execution)
# APP_TESTING=false

# Debug mode - WARNING: Never enable in production!
# Shows detailed error pages with stack traces
APP_DEBUG=false

# Service name used in health checks and responses
APP_SERVICE_NAME=shpetny-fastapi-blueprint

# Documentation settings
APP_DOC_TITLE=Shpetny FastAPI Blueprint
APP_DOC_VERSION=1.0.0
APP_DOC_DESCRIPTION=API documentation for Shpetny FastAPI Blueprint
APP_DOC_OPENAPI_URL=/api/openapi.json
APP_DOC_OPENAPI_VERSION=3.0.2
APP_DOC_SWAGGER_URL=/api/docs
APP_DOC_REDOC_URL=/api/redoc

# -----------------------------------------------------------------------------
# CORS Settings
# -----------------------------------------------------------------------------
# WARNING: CORS configuration is critical for security!
# 
# SECURITY BEST PRACTICES:
# 1. NEVER use ["*"] with APP_CORS_ALLOW_CREDENTIALS=true (security risk)
# 2. Use specific origins in production (e.g., ["https://example.com"])
# 3. ["*"] allows all origins and is only suitable for development
# 4. The application will validate and warn about insecure configurations

# Allowed CORS origins (JSON array format, must be quoted)
# Default: ["*"] - Allows all origins (INSECURE for production!)
# Production example: ["https://api.example.com", "https://app.example.com"]
# Development example: ["http://localhost:3000", "http://localhost:8080"]
APP_CORS_ALLOW_ORIGINS='["*"]'

# Production example (uncomment and customize):
# APP_CORS_ALLOW_ORIGINS='["https://api.example.com","https://app.example.com"]'

# Allowed HTTP methods for CORS (JSON array format)
# Default: ["GET", "POST", "PUT", "DELETE", "PATCH", "OPTIONS"]
# Use ["*"] to allow all methods (not recommended for production)
APP_CORS_ALLOW_METHODS='["GET","POST","PUT","DELETE","PATCH","OPTIONS"]'

# Alternative: Allow all methods (not recommended)
# APP_CORS_ALLOW_METHODS='["*"]'

# Allowed HTTP headers for CORS (JSON array format)
# Default: ["*"] - Allows all headers
# Production example: ["Content-Type", "Authorization", "X-Request-ID"]
APP_CORS_ALLOW_HEADERS='["*"]'

# Production example (uncomment and customize):
# APP_CORS_ALLOW_HEADERS='["Content-Type","Authorization","X-Request-ID"]'

# Allow credentials in CORS requests (cookies, authorization headers, etc.)
# WARNING: Cannot be true if APP_CORS_ALLOW_ORIGINS is ["*"]
# Set to true only when using specific origins
APP_CORS_ALLOW_CREDENTIALS=false

# Maximum age (in seconds) for CORS preflight requests
# Browsers will cache preflight responses for this duration
APP_CORS_MAX_AGE=600


# -----------------------------------------------------------------------------
# Logging Settings
# -----------------------------------------------------------------------------

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
APP_LOG_LEVEL=INFO

# Log format: 'json' for structured JSON logs, 'text' for human-readable logs
APP_LOG_FORMAT=json

# Date format for log timestamps
APP_LOG_DATE_FORMAT=%Y-%m-%d %H:%M:%S

# Include request ID (correlation ID) in all log entries
APP_LOG_INCLUDE_REQUEST_ID=true

# Log request body in request/response middleware
# WARNING: May log sensitive data - use with caution!
APP_LOG_REQUEST_BODY=false

# Log requests that exceed the slow request threshold
APP_LOG_SLOW_REQUESTS=true

# Threshold in seconds for logging slow requests
APP_LOG_SLOW_REQUEST_THRESHOLD=1.0

# -----------------------------------------------------------------------------
# Database Settings
# -----------------------------------------------------------------------------

# PostgreSQL connection settings
APP_DB_HOST=postgres
APP_DB_PORT=5432
APP_DB_USER=postgres
APP_DB_PASSWORD=postgres
APP_DB_NAME=shpetny_fastapi_blueprint

# Database connection pool settings
# Pool size: number of connections to maintain
APP_DB_POOL_SIZE=5

# Max overflow: additional connections allowed beyond pool_size
APP_DB_MAX_OVERFLOW=10

# Pool timeout: seconds to wait for a connection from the pool
APP_DB_POOL_TIMEOUT=30

# Pool recycle: seconds after which a connection is recycled
APP_DB_POOL_RECYCLE=3600

# Enable SQLAlchemy query logging (useful for debugging)
# Set to true to see all SQL queries in logs
APP_DB_ECHO=false

# -----------------------------------------------------------------------------
# Docker Compose Overrides (if using docker-compose)
# -----------------------------------------------------------------------------
# These are used by docker-compose.yml and may override APP_* variables
# Uncomment and adjust if needed:

# POSTGRES_USER=postgres
# POSTGRES_PASSWORD=postgres
# POSTGRES_DB=shpetny_fastapi_blueprint
# PGDATA=/var/lib/postgresql/data/pgdata

# -----------------------------------------------------------------------------
# Server Settings (used by entrypoint.sh)
# -----------------------------------------------------------------------------
# These are used directly by the entrypoint script, not through settings:

# HOST=0.0.0.0
# PORT=8080
# -----------------------------------------------------------------------------
# Cache Settings (Redis)
# -----------------------------------------------------------------------------

# Enable Redis cache
APP_CACHE_ENABLED=true

# Redis connection settings
APP_CACHE_HOST=redis
APP_CACHE_PORT=6379
APP_CACHE_PASSWORD=
APP_CACHE_DB=0

# Redis connection pool settings
APP_CACHE_DECODE_RESPONSES=true
APP_CACHE_SOCKET_TIMEOUT=5
APP_CACHE_SOCKET_CONNECT_TIMEOUT=5
APP_CACHE_MAX_CONNECTIONS=50
APP_CACHE_RETRY_ON_TIMEOUT=true

# Default time-to-live for cached items (in seconds)
APP_CACHE_DEFAULT_TTL=3600

# -----------------------------------------------------------------------------
# Security Headers Settings
# -----------------------------------------------------------------------------

# Enable security headers middleware
APP_SECURITY_HEADERS_ENABLED=true

# X-Content-Type-Options: Prevents MIME type sniffing
APP_SECURITY_X_CONTENT_TYPE_OPTIONS=nosniff

# X-Frame-Options: Prevents clickjacking attacks
# Options: DENY, SAMEORIGIN, ALLOW-FROM
APP_SECURITY_X_FRAME_OPTIONS=DENY

# X-XSS-Protection: Enables XSS filter in older browsers
APP_SECURITY_X_XSS_PROTECTION=1; mode=block

# Strict-Transport-Security (HSTS): Force HTTPS
# Only set this if your application is served over HTTPS!
# Example: max-age=31536000; includeSubDomains
# APP_SECURITY_STRICT_TRANSPORT_SECURITY=max-age=31536000; includeSubDomains

# Content-Security-Policy: Control resource loading
# If None, header is not set (allows flexibility for API-only services)
# Example: default-src 'self'; script-src 'self' 'unsafe-inline'
# APP_SECURITY_CONTENT_SECURITY_POLICY=default-src 'self'

# Referrer-Policy: Controls how much referrer information is sent
APP_SECURITY_REFERRER_POLICY=strict-origin-when-cross-origin

# Permissions-Policy: Controls browser features and APIs
# Example: geolocation=(), microphone=(), camera=()
# APP_SECURITY_PERMISSIONS_POLICY=geolocation=(), microphone=(), camera=()

# -----------------------------------------------------------------------------
# Rate Limiting Settings
# Input Validation & Security Settings
# -----------------------------------------------------------------------------

# Trusted Hosts Middleware (prevents host header injection attacks)
# Enable to validate Host header against allowed hosts
APP_TRUSTED_HOSTS_ENABLED=false

# List of trusted hosts (JSON array format, must be quoted)
# Examples:
#   ['example.com', '*.example.com'] - Allow example.com and all subdomains
#   ['api.example.com'] - Allow only api.example.com
#   ['*'] - Allow all hosts (not recommended for production)
# APP_TRUSTED_HOSTS='["example.com","*.example.com"]'

# Maximum request body size in bytes (default: 10MB = 10485760 bytes)
# Prevents DoS attacks via large payloads
# Common values:
#   1MB = 1048576
#   5MB = 5242880
#   10MB = 10485760 (default)
#   50MB = 52428800
APP_MAX_REQUEST_BODY_SIZE=10485760

# -----------------------------------------------------------------------------

# Enable rate limiting
APP_RATE_LIMIT_ENABLED=false

# Default rate limit for all endpoints
# Format: 'count/period' (e.g., '100/minute', '10/second', '1000/hour')
APP_RATE_LIMIT_DEFAULT=100/minute

# Redis URI for rate limiting storage (recommended for production)
# If None, uses in-memory storage (not recommended for multiple workers)
# Example: redis://localhost:6379/1
# APP_RATE_LIMIT_STORAGE_URI=redis://localhost:6379/1

# Include rate limit headers in responses
# Headers: X-RateLimit-Limit, X-RateLimit-Remaining, X-RateLimit-Reset
APP_RATE_LIMIT_HEADERS_ENABLED=true
